{% extends "network/layout.html" %}

{% block body %}
{% if user.is_authenticated %}
    <br>
    <form action="{% url 'index' %}" method="POST">
        {% csrf_token %}
        {{ post_form.as_p}}
        <input type="submit" class="btn btn-primary btn-post" value="Post!">
    </form>
    <hr>

{% else %}
<h2> Create an account and start posting!</h2>
{% endif %}
{% if posts|length == 0 %}
<h1>There is any post. Start following someone, or make the first post ever!</h1>
{% else %}

<h1>Posts:</h1>
{% for post in posts %}

<div class="each-post">
    <a class="writed_by" href="{% url 'profile' post.writed_by%}">{{post.writed_by}}</a> @ <time>{{post.timestamp}}</time>
    <a>{{post.like_post.count}}</a><button class="btn bi bi-heart-fill"></button><button class="btn bi bi-heart"></button>
<br>
    <span class="post_message">{{post.post_message}}</span>
    {% if post.writed_by == request.user %}
    <button class="btn btn-secondary bi bi-pencil-fill edit" onclick="console.log(editPost('{{post.id}}'));"></button>
    {% endif %}
</div>
{% endfor %}

<div class="pagination">
    <span class="step-links">
        {% if posts.has_previous %}
            <a href="?page=1"> First </a>
            <a href="?page={{ posts.previous_page_number }}"> Previous </a>
        {% endif %}

        <span class="current">
            Page {{ posts.number }} of {{ posts.paginator.num_pages }}
        </span>

        {% if posts.has_next %}
            <a href="?page={{ posts.next_page_number }}"> Next </a>
            <a href="?page={{ posts.paginator.num_pages }}"> Last </a>
        {% endif %}
    </span>
</div>
{% endif %}
{% endblock %}