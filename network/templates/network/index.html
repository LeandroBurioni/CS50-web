{% extends "network/layout.html" %}

{% block body %}
{% if user.is_authenticated %}
    <br>
    <form action="{% url 'index' %}" method="POST">
        {% csrf_token %}
        {{ post_form.as_p}}
        <input type="submit" class="btn btn-primary btn-post" value="Post!">
    </form>
    <br>

{% else %}
<h2> Create an account and start posting!</h2>
{% endif %}

{% for post in posts %}

<div class="each-post">
    <time>{{post.timestamp}}</time>
    <a href="{% url 'profile' post.writed_by%}">{{post.writed_by}}</a>
    <p>{{post.post_message}}</p>
</div>
{% endfor %}


<div class="pagination">
    <span class="step-links">
        {% if posts.has_previous %}
            <a href="?page=1"> First </a>
            <a href="?page={{ posts.previous_page_number }}"> Previous </a>
        {% endif %}

        <span class="current">
            Page {{ posts.number }} of {{ posts.paginator.num_pages }}.
        </span>

        {% if posts.has_next %}
            <a href="?page={{ posts.next_page_number }}"> Next </a>
            <a href="?page={{ posts.paginator.num_pages }}"> Last </a>
        {% endif %}
    </span>
</div>

{% endblock %}